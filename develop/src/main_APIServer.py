from flask import Flask, request
from flask_cors import CORS
app = Flask(__name__)
CORS(app)

patient_data = {}

@app.route('/req', methods=['GET'])
def send_patient_data():
    global patient_data
    # patient_data = {'name': '서정석', 'gender': 1, 'birth_date': '1976-10-10', 'inspc_date': '2019-02-25', 'diseases': {'간암': {'1': {'name': '아세테이트아미노전이효소', 'min': 4.0, 'max': 40.0, 'value': 23.0}, '2': {'name': '알라닌아미노전이효소', 'min': 4.0, 'max': 40.0, 'value': 39.0}, '3': {'name': '알카라인 포스타파제', 'min': 35.0, 'max': 130.0, 'value': 57.7}, '4': {'name': '감마글루타밀전이효소', 'min': 11.0, 'max': 63.0, 'value': 52.5}, '5': {'name': '고밀도지단백콜레스테롤', 'min': 60.0, 'max': 999.0, 'value': 56.9}, '0': {'name': '비만도', 'min': 18.5, 'max': 22.9, 'value': 27.0}, 'percent': 20.8, 'habit': '- 고른 식사와 규칙적 운동이 중요합니다. - 지나친 음주는 삼가합니다. - 흡연을 하지 않습니다. - 정기적인 건강검진을 통해 간 기능을 체크합니다. - B형간염 바이러스에 대한 항체가 없다면 B형간염 백신을 맞습니다. - 우상복부 통증, 체중감소, 피로감 등이 발견되면 의사와 상의합니다. - 만성 간질환의 경우 정기적인 초음파검사와 피검사를 받습니다.'}, '위암': {'1': {'name': '종양표지자(CEA)', 'min': 0.0, 'max': 4.7, 'value': 1.9}, '2': {'name': '종양표지자(CA19-9)', 'min': 0.0, 'max': 34.0, 'value': 7.3}, '3': {'name': '고밀도지단백콜레스테롤', 'min': 60.0, 'max': 999.0, 'value': 56.9}, '4': {'name': '중성지방', 'min': 0.0, 'max': 149.0, 'value': 170.2}, '5': {'name': '공복혈당', 'min': 70.0, 'max': 99.0, 'value': 101.6}, '0': {'name': '저밀도지단백콜레스테롤', 'min': 0.0, 'max': 129.0, 'value': 118.2}, 'percent': 33.0, 'habit': None}, '폐암': {'1': {'name': '종양표지자(Cyfra21-1)', 'min': 0.0, 'max': 3.3, 'value': 1.7}, '2': {'name': '종양표지자(CEA)', 'min': 0.0, 'max': 4.7, 'value': 1.9}, '3': {'name': '아세테이트아미노전이효소', 'min': 4.0, 'max': 40.0, 'value': 23.0}, '4': {'name': '알카라인 포스타파제', 'min': 35.0, 'max': 130.0, 'value': 57.7}, '5': {'name': '공복혈당', 'min': 70.0, 'max': 99.0, 'value': 101.6}, '0': {'name': '종양표지자(CA19-9)', 'min': 0.0, 'max': 34.0, 'value': 7.3}, 'percent': 16.0, 'habit': None}, '대장암': {'1': {'name': '종양표지자(CEA)', 'min': 0.0, 'max': 4.7, 'value': 1.9}, '2': {'name': '종양표지자(CA19-9)', 'min': 0.0, 'max': 34.0, 'value': 7.3}, '3': {'name': '공복혈당', 'min': 70.0, 'max': 99.0, 'value': 101.6}, '4': {'name': '중성지방', 'min': 0.0, 'max': 149.0, 'value': 170.2}, '5': {'name': '비만도', 'min': 18.5, 'max': 22.9, 'value': 27.0}, '0': {'name': '감마글루타밀전이효소', 'min': 11.0, 'max': 63.0, 'value': 52.5}, 'percent': 33.0, 'habit': None}, '갑상선암': {'1': {'name': '갑상선기능검사(Free T4)', 'min': 0.9, 'max': 1.7, 'value': 1.4}, '2': {'name': '갑상선기능검사(TSH)', 'min': 0.3, 'max': 5.0, 'value': 2.2}, '3': {'name': '중성지방', 'min': 0.0, 'max': 149.0, 'value': 170.2}, '4': {'name': '비만도', 'min': 18.5, 'max': 22.9, 'value': 27.0}, '5': {'name': '저밀도지단백콜레스테롤', 'min': 0.0, 'max': 129.0, 'value': 118.2}, '0': {'name': '알카라인 포스타파제', 'min': 35.0, 'max': 130.0, 'value': 57.7}, 'percent': 50.0, 'habit': None}, '뇌졸중': {'1': {'name': '수축기 혈압', 'min': 0.0, 'max': 119.0, 'value': 132.0}, '2': {'name': '이완기 혈압', 'min': 0.0, 'max': 79.0, 'value': 79.0}, '3': {'name': '저밀도지단백콜레스테롤', 'min': 0.0, 'max': 129.0, 'value': 118.2}, '4': {'name': '총콜레스테롤', 'min': 130.0, 'max': 199.0, 'value': 208.5}, '5': {'name': '감마글루타밀전이효소', 'min': 11.0, 'max': 63.0, 'value': 52.5}, '0': {'name': '중성지방', 'min': 0.0, 'max': 149.0, 'value': 170.2}, 'percent': 34.4, 'habit': None}, '심근경색': {'1': {'name': '총콜레스테롤', 'min': 130.0, 'max': 199.0, 'value': 208.5}, '2': {'name': '저밀도지단백콜레스테롤', 'min': 0.0, 'max': 129.0, 'value': 118.2}, '3': {'name': '비만도', 'min': 18.5, 'max': 22.9, 'value': 27.0}, '4': {'name': '수축기 혈압', 'min': 0.0, 'max': 119.0, 'value': 132.0}, '5': {'name': '이완기 혈압', 'min': 0.0, 'max': 79.0, 'value': 79.0}, '0': {'name': '공복혈당', 'min': 70.0, 'max': 99.0, 'value': 101.6}, 'percent': 53.4, 'habit': None}, '당뇨병': {'1': {'name': '공복혈당', 'min': 70.0, 'max': 99.0, 'value': 101.6}, '2': {'name': '중성지방', 'min': 0.0, 'max': 149.0, 'value': 170.2}, '3': {'name': '감마글루타밀전이효소', 'min': 11.0, 'max': 63.0, 'value': 52.5}, '4': {'name': '총콜레스테롤', 'min': 130.0, 'max': 199.0, 'value': 208.5}, '5': {'name': '저밀도지단백콜레스테롤', 'min': 0.0, 'max': 129.0, 'value': 118.2}, '0': {'name': '알라닌아미노전이효소', 'min': 4.0, 'max': 40.0, 'value': 39.0}, 'percent': 31.0, 'habit': None}, '폐결핵': {'1': {'name': '비만도', 'min': 18.5, 'max': 22.9, 'value': 27.0}, '2': {'name': '총콜레스테롤', 'min': 130.0, 'max': 199.0, 'value': 208.5}, '3': {'name': '알부민', 'min': 3.5, 'max': 5.3, 'value': 4.4}, '4': {'name': '저밀도지단백콜레스테롤', 'min': 0.0, 'max': 129.0, 'value': 118.2}, '5': {'name': '고밀도지단백콜레스테롤', 'min': 60.0, 'max': 999.0, 'value': 56.9}, '0': {'name': '중성지방', 'min': 0.0, 'max': 149.0, 'value': 170.2}, 'percent': 32.0, 'habit': None}, '고혈압': {'1': {'name': '이완기 혈압', 'min': 0.0, 'max': 79.0, 'value': 79.0}, '2': {'name': '수축기 혈압', 'min': 0.0, 'max': 119.0, 'value': 132.0}, '3': {'name': '감마글루타밀전이효소', 'min': 11.0, 'max': 63.0, 'value': 52.5}, '4': {'name': '비만도', 'min': 18.5, 'max': 22.9, 'value': 27.0}, '5': {'name': '공복혈당', 'min': 70.0, 'max': 99.0, 'value': 101.6}, '0': {'name': '중성지방', 'min': 0.0, 'max': 149.0, 'value': 170.2}, 'percent': 40.6, 'habit': None}, '고지혈증': {'1': {'name': '총콜레스테롤', 'min': 130.0, 'max': 199.0, 'value': 208.5}, '2': {'name': '중성지방', 'min': 0.0, 'max': 149.0, 'value': 170.2}, '3': {'name': '저밀도지단백콜레스테롤', 'min': 0.0, 'max': 129.0, 'value': 118.2}, '4': {'name': '고밀도지단백콜레스테롤', 'min': 60.0, 'max': 999.0, 'value': 56.9}, '5': {'name': '감마글루타밀전이효소', 'min': 11.0, 'max': 63.0, 'value': 52.5}, '0': {'name': '알라닌아미노전이효소', 'min': 4.0, 'max': 40.0, 'value': 39.0}, 'percent': 50.0, 'habit': None}, '지방간': {'1': {'name': '아세테이트아미노전이효소', 'min': 4.0, 'max': 40.0, 'value': 23.0}, '2': {'name': '알라닌아미노전이효소', 'min': 4.0, 'max': 40.0, 'value': 39.0}, '3': {'name': '감마글루타밀전이효소', 'min': 11.0, 'max': 63.0, 'value': 52.5}, '4': {'name': '알카라인 포스타파제', 'min': 35.0, 'max': 130.0, 'value': 57.7}, '5': {'name': '중성지방', 'min': 0.0, 'max': 149.0, 'value': 170.2}, '0': {'name': '비만도', 'min': 18.5, 'max': 22.9, 'value': 27.0}, 'percent': 39.2, 'habit': None}, '단백뇨': {'1': {'name': '요단백', 'min': 0.0, 'max': 5.0, 'value': 0.0}, '2': {'name': '알부민', 'min': 3.5, 'max': 5.3, 'value': 4.4}, '3': {'name': '혈청크레아티닌', 'min': 0.6, 'max': 1.5, 'value': 1.1}, '4': {'name': '총단백질', 'min': 6.5, 'max': 8.3, 'value': 7.0}, '5': {'name': '중성지방', 'min': 0.0, 'max': 149.0, 'value': 170.2}, '0': {'name': '공복혈당', 'min': 70.0, 'max': 99.0, 'value': 101.6}, 'percent': 7.0, 'habit': None}}}
    return patient_data

@app.route('/', methods=['POST'])
def get_patient_data():
    global patient_data
    patient_data = request.json
    return patient_data

if __name__=="__main__":
    app.run(host='127.0.0.1', port = 9999)